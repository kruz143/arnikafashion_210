window.et_panel=window.et_panel||{},function(t){t(document).ready(function(t){var e={plugins_page_actions:function(e,a){if(t(".et_plugin-nonce").length){var n=e.parents(".et_plugin"),i=n.attr("data-filter"),l=t(".error-text").text(),r={action:"envato_setup_plugins",helper:"plugins",type:"et_plugins_actions",slug:e.attr("data-slug"),wpnonce:t(document).find(".et_plugin-nonce").attr("data-plugin-nonce")},o=e.attr("data-action"),c=n.find(".plugin-action-text");t(".et_filesystem").attr("data-filesystem")?(t(".et_plugin-control").css({"pointer-events":"none"}),n.addClass("in_progress"),"deactivate"==o?c.text(c.attr("data-deactivate")):"install"==o?c.text(c.attr("data-install")):"activate"==o?c.text(c.attr("data-activate")):"update"==o&&c.text(c.attr("data-update")),"deactivate"==e.attr("data-action")?(r.action="et_plugins_actions",r.type=e.attr("data-action"),t.ajax({method:"POST",url:ajaxurl,data:r,success:function(e){i=i.replace("active","disabled"),n.attr("data-filter",i),n.removeClass("et_plugin-active"),n.removeClass("in_progress"),n.find('.et_plugin-control[data-action="activate"]').removeClass("hidden"),n.find('.et_plugin-control[data-action="deactivate"]').addClass("hidden"),t('.plugin-filter[data-filter="all"]').trigger("click"),et_panel.et_delete_transient("etheme_plugins_info")},error:function(t){c.text(""),n.removeClass("in_progress"),alert(l)},complete:function(e){t(".et_plugin-control").css({"pointer-events":"all"}),c.text("")}})):t.ajax({method:"POST",url:ajaxurl,data:r,success:function(a){""!=a.hash?t.ajax({method:"POST",url:a.url,data:a,success:function(a){var l=et_panel.check_data(a);l?alert(l):(n.find('.et_plugin-control[data-action="update"]').addClass("hidden"),n.find('.et_plugin-control[data-action="activate"]').addClass("hidden"),n.find('.et_plugin-control[data-action="install"]').addClass("hidden"),n.find('.et_plugin-control[data-action="deactivate"]').removeClass("hidden")),i=i.replace("disabled","active"),n.attr("data-filter",i),n.addClass("et_plugin-active"),n.removeClass("in_progress"),"update"==e.attr("data-action")&&(n.find(".current-version").html("v."+n.find(".new-version").html()),n.find(".new-version-text").addClass("hidden")),t('.plugin-filter[data-filter="all"]').trigger("click")},error:function(){n.removeClass("in_progress"),c.text(""),alert(l)},complete:function(){t(".et_plugin-control").css({"pointer-events":"all"}),c.text("")}}):(c.text(""),alert(l))},error:function(t){c.text(""),alert(l)},complete:function(t){}})):alert(l)}},check_data:function(t){return t.includes("Destination folder already exists")?"Plugin installation failed, destination folder already exists":!(!t.includes("Plugin installation failed")&&!t.includes("An error occurred while installing"))&&"Plugin installation failed"},et_delete_transient:function(e){var a={action:"et_delete_transient",helper:"plugins",transient:e,wpnonce:t(document).find(".et_plugin-nonce").attr("data-plugin-nonce")};t.ajax({method:"POST",url:ajaxurl,data:a,success:function(t){},error:function(t){},complete:function(t){}})}};window.et_panel=Object.assign(window.et_panel,e);var a={1:{selector:".et_plugin-control",type:"click",callback:et_panel.plugins_page_actions}};t.each(a,function(e,a){"ready"==a.type?t(document).ready(function(e){a.callback(t(this),e)}):t(a.selector).on(a.type,function(e){a.callback(t(this),e)})})})}(jQuery,window.et_panel);