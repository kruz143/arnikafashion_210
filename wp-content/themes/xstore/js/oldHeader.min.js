var oldHeader;!function(a){"use strict";var b;oldHeader={init:function(){b={w_width:a(window).width(),w_height:a(window).height(),mob_menu_opened:!1,top_panel_opened:!1,fixed_header:"fixed"==etOldHeaderConfig.layoutSettings.fixed_header_type,header_resizing:!1,shop_navbar:a("body").hasClass("shop-top-bar"),classes:{skeleton:etOldHeaderConfig.et_global.classes.skeleton,mfp:etOldHeaderConfig.et_global.classes.mfp}},this.helpers(),this.fixedHeader(),this.searchform(),this.mobileMenu(),this.newsletterPopup(),this.topPanel(),this.ajaxSearch(),this.hamburgerIcon(),this.scrollMenu(),this.NavbarHeader(),etOldHeaderConfig.woocommerceSettings.is_woocommerce&&this.wishlist(),setTimeout(function(){a("body").addClass("cart-widget-show")},1e3)},helpers:function(){a(window).resize(function(){b.w_width=a(window).width(),b.w_height=a(window).height()})},fixedHeader:function(){function c(){var c,e=d.find(".header-logo").html(),f=d.find(".menu-wrapper").first(),g=f.attr("class"),h=d.find(".menu-wrapper-right"),i=d.find(".navbar-header").html(),j=d.find(".navbar-toggle").html(),k=a(".page-wrapper").data("fixed-color");return b.shop_navbar&&(i=oldHeader.NavbarHeader("fixed")),c=h.length>0?f.html()+h.html():f.html(),a(".woocommerce-mini-cart__buttons").hasClass("wcppec-cart-widget-spb")&&(i=i.replace(a(".wcppec-cart-widget-spb").html(),"")),null==e&&(e=""),null==c&&(c=""),null==i&&(i=""),null==j&&(j='<span class="sr-only">Menu</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>'),'<div class="fixed-header header-color-'+k+'"><div class="container"><div class="container-wrapper"><div class="navbar-toggle">'+j+'</div><div class="header-logo">'+e+'</div><div class="'+g+'">'+c+'</div><div class="navbar-header">'+i+"</div></div></div></div>"}if(!(a.inArray(etOldHeaderConfig.layoutSettings.fixed_header_type,["fixed","sticky"])<0||a("body").hasClass("et-vertical-fixed")&&b.w_width>992)){var d=a(".header-wrapper"),e=120,f=c();if(d.after(f),b.w_width<768&&(e=80),b.fixed_header)a(window).scroll(function(){a(this).scrollTop()>e?a(".fixed-header").addClass("fixed-enabled"):a(".fixed-header").removeClass("fixed-enabled")});else if(a("body").hasClass("et-header-sticky")){var g=0;a(window).scroll(function(){var b=a(this).scrollTop();b<g&&b>e?a(".fixed-header").addClass("sticky-header-enabled"):a(".fixed-header").removeClass("sticky-header-enabled"),g=b})}}},searchform:function(){var b=a(".header-search");b.each(function(){var c=a(this);c.on("click",".search-btn",function(a){a.preventDefault(),b.hasClass("search-open")?e():d()}),a("body").on("click",".page-wrapper",function(b){!a(b.target).hasClass("header-search")&&a(b.target).closest(".header-search").length||c.hasClass("search-open")&&e()});var d=function(){c.closest(a(".navbar-header")).addClass("search-active"),c.parents(".header-wrapper, .fixed-header").addClass("search-now-opened"),c.addClass("search-open"),c.find(".search-form-wrapper").fadeIn(200),c.find('input[type="text"]').focus()},e=function(){c.parents(".header-wrapper, .fixed-header").removeClass("search-now-opened"),c.removeClass("search-open"),c.find(".search-form-wrapper").fadeOut(200),c.closest(a(".navbar-header")).removeClass("search-active")}})},mobileMenu:function(){function c(){a("body").removeClass("mobile-menu-closed").addClass("mobile-menu-opened"),a(".navbar-toggle").addClass("show-nav"),b.mob_menu_opened=!0}function d(){a(".navbar-toggle").removeClass("show-nav"),a("body").removeClass("mobile-menu-opened").addClass("mobile-menu-closed"),b.mob_menu_opened=!1}a(document).on("click",".navbar-toggle",function(){b.mob_menu_opened?d():c()});var e=a(".mobile-menu-wrapper .menu");e.find("li:has(ul)",this).each(function(){var b,c,d=a(this);d.prepend('<span class="open-child"></span>'),b=etOldHeaderConfig.menuBack,c=d.find("> a").clone(),d.find("> ul").prepend('<li class="menu-show-all">'+c.wrap("<div>").parent().html()+"</li>"),d.find("> ul").prepend('<li class="menu-back"><a href="javascript:void(0);">'+b+"</a></li>")}),e.on("click",".open-child, .open-child+a",function(b){b.preventDefault(),a(this).parent().hasClass("over")?(a(this).parent().removeClass("over"),a(this).parent().hasClass("item-level-0")&&e.removeClass("moves-out")):(a(this).parent().parent().find(">li.over").removeClass("over"),a(this).parent().addClass("over"),a(this).parent().hasClass("item-level-0")&&e.addClass("moves-out"))}),e.on("click",".menu-back",function(){var b=a(this).parent().parent();b.hasClass("over")&&(b.removeClass("over"),b.hasClass("item-level-0")&&e.removeClass("moves-out"))}),a(".template-content").on("click",function(c){a(c.target).closest(".mobile-menu-wrapper").length||a(c.target).closest(".navbar-toggle").length||b.mob_menu_opened&&d()}),a(".mobile-menu-wrapper .open-child").on("click touchstart",function(b){setTimeout(function(){a(".navbar-collapse").animate({scrollTop:0},600)},500)})},newsletterPopup:function(){var c=a.cookie("etheme_popup_closed");if(a(".etheme-popup").magnificPopup({items:{src:"#etheme-popup-wrapper",type:"inline"},removalDelay:300,callbacks:{beforeOpen:function(){this.st.mainClass="mfp-zoom-out",a("body").addClass("newsletter-open"),a("html").addClass(b.classes.mfp)},beforeClose:function(){a.cookie("etheme_popup_closed","do-not-show",{expires:1,path:"/"}),setTimeout(function(){a("body").removeClass("newsletter-open")},300)},afterClose:function(){a("html").removeClass(b.classes.mfp)}}}),"do-not-show"!==c&&a(".etheme-popup").length>0)if(a("body").hasClass("scroll-popup")){var d=!1;a(window).scroll(function(){if(d)return!1;if(a(document).scrollTop()>a(document).height()-b.w_height-300){var c=a("#etheme-popup-holder").attr("data-delay");setTimeout(function(){a(".etheme-popup").magnificPopup("open")},c),d=!0}})}else if(a("body").hasClass("open-popup")){var e=a("#etheme-popup-holder").attr("data-delay");setTimeout(function(){a(".etheme-popup").magnificPopup("open")},e)}},topPanel:function(){function c(){a("body").removeClass("top-panel-closed").addClass("top-panel-opened"),b.top_panel_opened=!0,setTimeout(function(){a(".template-content").one("click",function(a){b.top_panel_opened&&d()})},1)}function d(){a("body").removeClass("top-panel-opened").addClass("top-panel-closed"),b.top_panel_opened=!1}a(".top-panel-open").click(function(){b.top_panel_opened?d():c()}),a(".close-panel").click(function(){a(".template-content").click()})},ajaxSearch:function(){var b=a(".header-wrapper .ajax-search-form"),c=!1,d=!1;b.on("keyup",'input[type="text"]',function(){var b=a(this).parents(".ajax-search-form"),e=b.find(".ajax-results"),f=b.find('input[type="text"]').val();if(f.length<1&&!c)return void e.html("").hide();var g=a(this).parents(".ajax-search-form").find("select").val();g||(g=0),d=a.ajax({url:etOldHeaderConfig.ajaxurl,method:"POST",data:{action:"et_ajax_search",s:f,cat:g},dataType:"json",beforeSend:function(){b.addClass("ajax-in-action"),e.hide()},complete:function(){b.removeClass("ajax-in-action"),c=!0},success:function(a){e.html(a.html).css("display","flex")},error:function(){}}),a("body").on("click",function(b){!a(b.target).hasClass("search-form-wrapper")&&a(b.target).closest(".search-form-wrapper").length||e.hide()})})},hamburgerIcon:function(){a(document).on("click",".hamburger-icon",function(){a("body").toggleClass("fullscreen-menu-opened")}),a(".content-page, footer.footer, .et-footers-wrapper, .header-wrapper.vertical-mod, .page-heading").on("click",function(b){a("body").is(".fullscreen-menu-opened.et-vertical-fixed")&&a("body").toggleClass("fullscreen-menu-opened")});var b=a(".fullscreen-menu-container .menu");b.find("li:has(ul)",this).each(function(){a(this).find(" > a").wrap('<div class="inside" />').parent().append('<span class="open-child">(open)</span>')}),b.on("click",".open-child",function(){a(this).parent().hasClass("over")?a(this).parent().removeClass("over").parent().find(" > .nav-sublist-dropdown, > .nav-sublist").stop().slideUp(300):a(this).parent().addClass("over").parent().find(" > .nav-sublist-dropdown, > .nav-sublist").stop().slideDown(300)}),b.parent().hasClass("one-page-menu")&&b.on("click",".item-link",function(){a("body").toggleClass("fullscreen-menu-opened")})},scrollMenu:function(){jQuery(".header-vertical .item-design-mega-menu > .nav-sublist-dropdown > .container, .header-vertical2 .item-design-mega-menu > .nav-sublist-dropdown > .container").each(function(){var a=jQuery(this),b=a.find("> ul");a.on("mousemove",function(c){var d=a.offset(),e=c.pageY-d.top,f=b.outerHeight()-a.height();if(!(f<0)){var g=e/a.height(),h=0;h=g<=0?0:g>=1?-f:-g*f,h=parseInt(h),b.css({position:"relative",top:h})}})})},NavbarHeader:function(c){if(b.shop_navbar&&!(b.w_width>992&&"fixed"!=c)){var d={};if(d.out="",a(".navbar-header").each(function(b){null!=a(this).find(".et-wishlist-widget").html()&&(d.wishlist='<div class="'+a(this).find(".et-wishlist-widget").attr("class")+'">',d.wishlist+=a(this).find(".et-wishlist-widget").html(),d.wishlist+="</div>"),null!=a(this).find(".header-search").html()&&(d.search='<div class="'+a(this).find(".header-search").attr("class")+'">',d.search+=a(this).find(".header-search").html(),d.search+="</div>"),a.inArray(etOldHeaderConfig.layoutSettings.header_type,["center","center3","advanced"])>-1&&null!=a(this).parents().find(".header-search").html()&&(a(this).parents().find(".header-search").parent(".menu")||(d.search='<div class="header-search act-full-width">',d.search+=a(this).parents().find(".header-search").html(),d.search+="</div>")),null!=a(this).find(".shopping-container").html()&&(d.cart='<div class="'+a(this).find(".shopping-container").attr("class")+'">',d.cart+=a(this).find(".shopping-container").html(),d.cart+="</div>"),null!=a(this).find(".my-account-link").html()&&(d.account='<div class="'+a(this).find(".my-account-link").attr("class")+'">',d.account+=a(this).find(".my-account-link").html(),d.account+="</div>"),null!=a(this).find(".login-link").html()&&(d.account='<div class="'+a(this).find(".login-link").attr("class")+'">',d.account+=a(this).find(".login-link").html(),d.account+="</div>"),"hamburger-icon"==etOldHeaderConfig.layoutSettings.header_type&&null!=a(this).find(".hamburger-icon").html()&&(d.hamburger='<div class="'+a(this).find(".hamburger-icon").attr("class")+'">',d.hamburger+=a(this).find(".hamburger-icon").html(),d.hamburger+="</div>")}),"fixed"!=c&&a(".navbar-header.show-in-header").remove(),d.out+="fixed"!=c?'<div class="navbar-header show-in-header">':"",d.out+=null!=d.search?d.search:"",d.out+=null!=d.account?d.account:"",d.out+=null!=d.wishlist?d.wishlist:"",d.out+=null!=d.cart?d.cart:"",d.out+=null!=d.hamburger?d.hamburger:"",d.out+="fixed"!=c?"</div>":"","fixed"==c)return d.out;a("header.main-header .navbar-toggle").before(d.out)}},wishlist:function(){function c(){a.ajax(e)}function d(b){a(".et-wishlist-widget").replaceWith(b)}if(0!=a(".et-wishlist-widget").length){setTimeout(function(){a("body").addClass("wishlist-show")},1e3),a(".yith-wcwl-add-button.show").each(function(){var b=a(this).find("a").text();a(this).find("a").attr("data-hover",b)});var e={url:etOldHeaderConfig.ajaxurl,data:{action:"etheme_wishlist_fragments"},method:"get",success:function(a){d(a.wishlist)}};a(document.body).bind("added_to_cart added_to_wishlist removed_from_wishlist",function(){c()});var f=0;a(document.body).bind("added_to_wishlist",function(){var c=a(".header .navbar-header");clearTimeout(f),b.fixed_header&&a(".fixed-header").hasClass("fixed-enabled")&&(c=a(".fixed-header .navbar-header")),c.addClass("wishlist-widget-show"),f=setTimeout(function(){c.removeClass("wishlist-widget-show")},4500)})}}},a(document).ready(function(){oldHeader.init()})}(jQuery);